!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const n=(t,e,i)=>{t.fillStyle="#888888",t.fillRect(0,0,e,i)},s=(t,e,i,n)=>{i.fillStyle=n;for(let n=0,s=t.length;n<s;n++){let s=t[n];i.fillRect(s.x*e+1,s.y*e+1,e-2,e-2)}},r=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];class o{constructor(t){this.snake=t,this.oldKey=null}drawSnake(t){s(this.snake,20,t,"rgb(0, 255, 0)"),t.fillStyle="#000000",t.fillRect(20*this.snake[0].x+6,20*this.snake[0].y+6,8,8)}moveSnake(t){const e=this.snake[0];let i=this.newSnakeHeadPosition(e,t);null!==i&&(i.x!==this.snake[1].x||i.y!==this.snake[1].y?this.oldKey=t:i=this.newSnakeHeadPosition(e,this.oldKey),null!==i&&(this.snake.pop(),this.snake.unshift(i)))}newSnakeHeadPosition(t,e){return"ArrowUp"===e?{x:t.x,y:t.y-1}:"ArrowDown"===e?{x:t.x,y:t.y+1}:"ArrowLeft"===e?{x:t.x-1,y:t.y}:"ArrowRight"===e?{x:t.x+1,y:t.y}:null}isHeadPositionInvalid(t,e,i){if(this.snake.filter(e=>e.x===t.x&&e.y===t.y).length>1)return!0;for(let i=0;i<30;i++)for(let n=0;n<40;n++)if(1===e[i][n]&&t.x===n&&t.y===i)return!0;for(let e=0,n=i.length;e<n;e++)if(i[e].willCollide(t))return!0;return!1}snakeEatsApple(t){const e=this.snake[0];for(let i=0,n=t.length;i<n;i++)if(e.x===t[i].x&&e.y===t[i].y){if(t.splice(i,1),new Audio("eat.mp3").play(),0===t.length){const t=this.snake[this.snake.length-1];this.snake.push({x:t.x,y:t.y})}return}}isSnakeDead(t,e){return this.isHeadPositionInvalid(this.snake[0],t,e)}isSnakeOutside(){const t=this.snake[0];return t.x<0||t.x>=40||t.y<0||t.y>=30}validMovesLeft(t,e){const i=this.snake[0],n=[{x:i.x,y:i.y-1},{x:i.x-1,y:i.y},{x:i.x+1,y:i.y},{x:i.x,y:i.y+1}];for(let i of n)if(!this.isHeadPositionInvalid(i,t,e))return!0;return!1}}class l{constructor(t){this.position=t,this.state=0,this.isOpening=!1,this.lastUpdateTimeStamp=null}draw(t){t.fillStyle="rgb(222, 184, 135)",0===this.state&&t.fillRect(20*(this.position.x+2)+1,20*this.position.y+1,18,18),this.state<=1&&(t.fillRect(20*(this.position.x+1)+1,20*this.position.y+1,18,18),t.fillRect(20*(this.position.x+3)+1,20*this.position.y+1,18,18)),this.state<=2&&(t.fillRect(20*this.position.x+1,20*this.position.y+1,18,18),t.fillRect(20*(this.position.x+4)+1,20*this.position.y+1,18,18))}update(t){this.lastUpdateTimeStamp||(this.lastUpdateTimeStamp=t),t-this.lastUpdateTimeStamp>500&&(this.lastUpdateTimeStamp=t,this.isOpening&&this.state<3&&this.state++)}willCollide(t){if(t.y===this.position.y)if(0===this.state){if(this.position.x<=t.x&&t.x<=this.position.x+4)return!0}else if(1===this.state){if(t.x===this.position.x||t.x===this.position.x+1||t.x===this.position.x+3||t.x===this.position.x+4)return!0}else if(2===this.state&&(t.x===this.position.x||t.x===this.position.x+4))return!0;return!1}startOpening(){this.isOpening||(this.isOpening=!0,new Audio("open.mp3").play())}}class a{constructor(t,e){this.pattern=t,this.gate=e}draw(t){s(this.pattern,20,t,"#DDDDDD"),this.drawShining(t)}update(t){for(let e=0,i=this.pattern.length;e<i;e++)for(let i=0,n=t.snake.length;i<n;i++){if(this.pattern[e].x===t.snake[i].x&&this.pattern[e].y===t.snake[i].y){this.pattern[e].isTriggered=!0;break}this.pattern[e].isTriggered=!1}this.pattern.filter(t=>t.isTriggered).length===this.pattern.length&&this.gate.startOpening()}drawShining(t){t.fillStyle="#B29700";for(let e=0,i=this.pattern.length;e<i;e++)if(this.pattern[e].isTriggered){const i=this.pattern[e];t.fillRect(20*i.x-5,20*i.y-5,30,30)}}}const y=((t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i.style.width=t,i.style.height=e,i})(800,600),p=y.getContext("2d");document.body.appendChild(y);let h=null,x=null,u=null,d=null,f=null,c=null;const g=()=>{n(p,800,600),((t,e,i,n,s)=>{for(let r=0;r<e;r++)for(let e=0;e<i;e++)1===t[r][e]?(s.fillStyle="#000000",s.fillRect(e*n+1,r*n+1,n-2,n-2)):(s.fillStyle="#FFFFFF",s.fillRect(e*n,r*n,n,n))})(r,30,40,20,p),((t,e,i)=>{s(t,e,i,"rgb(255, 0, 0)")})(h,20,p),u.draw(p),d.draw(p),f.draw(p),c.draw(p),x.drawSnake(p)},w=()=>{h=[{x:5,y:23},{x:4,y:4},{x:13,y:14},{x:17,y:13},{x:35,y:4},{x:35,y:9},{x:25,y:17},{x:14,y:25},{x:20,y:25}],x=new o([{x:27,y:25},{x:28,y:25},{x:29,y:25},{x:30,y:25},{x:31,y:25},{x:32,y:25},{x:33,y:25},{x:34,y:25},{x:35,y:25},{x:36,y:25},{x:37,y:25}]),u=new l({x:18,y:0}),d=new l({x:33,y:12}),f=new a([{x:5,y:21},{x:5,y:20},{x:5,y:19},{x:5,y:18},{x:5,y:17},{x:5,y:16},{x:5,y:15},{x:5,y:14},{x:5,y:13},{x:5,y:12},{x:5,y:11}],d),c=new a([{x:11,y:12},{x:12,y:12},{x:13,y:12},{x:14,y:12},{x:15,y:12},{x:15,y:13},{x:15,y:14},{x:15,y:15},{x:16,y:15},{x:17,y:15},{x:18,y:15},{x:19,y:15}],u),v.reset(),A="GAME"};let S=null;const m=new Audio("gameover.mp3"),k=new Audio("win.mp3"),v=new class{constructor(){this.presedMovementKey=null,this.presedSpaceKey=!1,document.addEventListener("keydown",this.onKeyDown.bind(this))}onKeyDown(t){this.isArrowKey(t.code)?this.presedMovementKey=t.code:"Space"===t.code&&(this.presedSpaceKey=!0)}isArrowKey(t){return"ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t}getCurrentMovementKey(){return this.presedMovementKey}isSpacePresed(){return!!this.presedSpaceKey&&(this.presedSpaceKey=!1,!0)}reset(){this.presedMovementKey=null,this.presedSpaceKey=!1}};let A="GAME";w();const b=t=>{"GAME"===A?((t=>{S||(S=t),t-S>150&&(S=t,x.moveSnake(v.getCurrentMovementKey()),x.snakeEatsApple(h)),f.update(x),c.update(x),u.update(t),d.update(t),x.isSnakeOutside()?(k.currentTime=0,k.play(),A="WIN"):x.isSnakeDead(r,[u,d])&&(m.currentTime=0,m.play(),A="GAME_OVER")})(t),g()):"GAME_OVER"===A?(n(p,800,600),p.fillStyle="#000000",p.font="50px Georgia",p.fillText("Game Over",100,100),p.fillText("Press space to play again",100,200),v.isSpacePresed()&&(m.pause(),w())):"WIN"===A&&(n(p,800,600),p.fillStyle="#000000",p.font="50px Georgia",p.fillText("WIN!!!",100,100),p.fillText("Press space to play again",100,200),v.isSpacePresed()&&(k.pause(),w())),window.requestAnimationFrame(b)};window.requestAnimationFrame(b)}]);